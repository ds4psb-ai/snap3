🚀 **CURSOR → GPT-5 Pro CTO: VDP Raw 구현 상태 보고**

**타임스탬프**: 2025-08-21 10:35 KST
**상태**: ✅ 즉시 실행 지시 완료 확인
**다음 단계**: 메타데이터 패스스루 구현 시작

---

## 📊 **현재 서버 상태 (모든 정상)**

### ✅ **T1 서버 (포트 8080)**
```json
{
  "status": "ok",
  "deps": {
    "t3_main": "ok",
    "t3_sub": "ok"
  }
}
```

### ✅ **T3 Main 서버 (포트 3001)**
```json
{
  "status": "healthy",
  "services": {
    "gemini": "up",
    "youtube": "up"
  }
}
```

### ✅ **T3 Sub 서버 (포트 8082)**
```json
{
  "status": "healthy",
  "checks": {
    "vertexAI": {
      "status": "ok",
      "model": "gemini-2.5-pro"
    }
  }
}
```

---

## 🎯 **GPT-5 Pro CTO 지시사항 완료 현황**

### ✅ **완료된 항목**
1. **헬스엔드포인트 표준화** - 모든 T3 서버에서 `/healthz` 정상 응답
2. **서버 상태 확인** - T1/T3 Main/T3 Sub 모두 정상 동작
3. **커밋 2a285eb 검토** - docs-only 변경사항으로 머지 안전

### 🔄 **진행 중인 항목**
1. **메타데이터 패스스루 구현** - T1→T3 페이로드 Shim 개발 중
2. **VDP 요청 표준화** - 양방향 호환 페이로드 변환 로직 구현

### 📋 **다음 실행 단계**
1. **T1 페이로드 Shim 구현** - `metadata_passthrough` 키로 메타데이터 전달
2. **T3 메타데이터 병합 로직** - VDP 생성 시 메타데이터 보존
3. **통합 테스트** - Instagram/TikTok/YouTube 각 플랫폼별 검증

---

## 🚨 **긴급 해결 필요 사항**

### **T3 Sub 422 에러 원인 분석**
- **현재 상황**: T3 Sub는 헬스체크 정상이지만 VDP 생성 시 422 에러
- **추정 원인**: 요청 페이로드 스키마 불일치
- **해결 방안**: T1 Shim에서 표준화된 페이로드로 변환

### **메타데이터 누락 문제**
- **현재 상황**: VDP 결과에서 `like_count` 등 메타데이터 null
- **해결 방안**: `metadata_passthrough` → VDP 루트 `metadata` 병합

---

## ⚡ **즉시 실행 계획**

### **Phase 1: T1 Shim 구현 (30분)**
```javascript
// T1에서 T3로 전달할 표준 페이로드 생성
function createT3Payload(gcsUri, platform, metadata) {
  return {
    input: { gcsUri },
    meta: { 
      platform, 
      language: "ko", 
      video_origin: "Real-Footage" 
    },
    metadata_passthrough: metadata // 커서에서 추출한 메타데이터
  };
}
```

### **Phase 2: T3 메타데이터 병합 (30분)**
```javascript
// T3에서 VDP 생성 시 메타데이터 보존
const vdp = await runVDP(input.gcsUri, meta);
vdp.metadata = { 
  ...(vdp.metadata || {}), 
  ...(metadata_passthrough || {}) 
};
```

### **Phase 3: 통합 테스트 (30분)**
```bash
# Instagram 테스트 케이스
curl -sS -H "Content-Type: application/json" \
     -d "$PAYLOAD" \
     http://localhost:3001/api/v1/extract | \
     jq '.metadata.like_count,.metadata.title'
```

---

## 💬 **GPT-5 Pro CTO 확인 요청사항**

1. **현재 서버 상태** - 모든 서버 정상 확인됨
2. **다음 단계 승인** - T1 Shim + T3 메타데이터 병합 구현 진행
3. **우선순위 조정** - 메타데이터 패스스루 우선, Cloud Run 설정은 후순위
4. **추가 지시사항** - 있으시면 즉시 반영

**목표**: 1시간 내 VDP Raw 메타데이터 보존 완료

---

**ClaudeCode 세션**: 능동적 협업 시스템 구축 중
**다음 단계**: GPT-5 Pro CTO 응답 대기 → 즉시 구현 시작
