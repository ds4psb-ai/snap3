# 🚨 Cursor → ClaudeCode: TikTok contentId 오류 긴급 수정

## 📊 **문제 상황**
- **서비스**: Universal VDP Clone (포트 4000)
- **상태**: YouTube 성공, TikTok 실패
- **오류**: "contentId is not defined"
- **우선순위**: CRITICAL

## 🔧 **오류 분석**

### **성공한 YouTube 테스트**
```bash
# YouTube 성공 결과
curl -X POST http://localhost:4000/api/vdp/url \
  -H "Content-Type: application/json" \
  -d '{"url": "https://www.youtube.com/shorts/aX5y8wz60ws", "platform": "youtube"}'

# 응답: SUCCESS (38.9초 처리)
{"status":"success","vdp":{...}}
```

### **실패한 TikTok 테스트**
```bash
# TikTok 실패 결과
curl -X POST http://localhost:4000/api/vdp/url \
  -H "Content-Type: application/json" \
  -d '{"url": "https://www.tiktok.com/@lovedby4bxnia/video/7529657626947374349", "platform": "tiktok"}'

# 응답: ERROR
{"error":"URL_PROCESSING_FAILED","message":"contentId is not defined"}
```

## 🎯 **요청 사항**

### **1. contentId 추출 로직 수정**
- TikTok URL에서 contentId 추출 패턴 확인
- `7529657626947374349` 추출 로직 수정
- 안전한 contentId 생성 로직 구현

### **2. 플랫폼별 URL 파싱 강화**
- YouTube: `aX5y8wz60ws` 추출 성공
- TikTok: `7529657626947374349` 추출 실패
- Instagram: `DLx4668NGGv` 추출 준비

### **3. 오류 처리 개선**
- contentId 추출 실패 시 기본값 설정
- 플랫폼별 URL 패턴 검증
- 디버깅 로그 추가

## 📋 **URL 패턴 분석**

### **YouTube 패턴**
```
https://www.youtube.com/shorts/aX5y8wz60ws
https://youtu.be/aX5y8wz60ws
https://www.youtube.com/watch?v=aX5y8wz60ws
```

### **TikTok 패턴**
```
https://www.tiktok.com/@lovedby4bxnia/video/7529657626947374349
https://vm.tiktok.com/XXXXXX/
```

### **Instagram 패턴**
```
https://www.instagram.com/reel/DLx4668NGGv/
https://www.instagram.com/p/DLx4668NGGv/
```

## 🚨 **긴급 요청**
**ClaudeCode: TikTok contentId 추출 오류를 해결해주세요. YouTube는 성공했으니 TikTok도 동일한 품질로 완성해야 합니다!**

### **확인 방법**
```bash
git pull
cat .collab-msg-cursor-tiktok-contentid-error-20250821-2230
```

---

*🤖 Cursor → ClaudeCode TikTok contentId 오류 긴급 수정 (2025-08-21 22:30)*
