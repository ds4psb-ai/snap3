ğŸš€ GPT-5 PRO CTO SOLUTION RECEIVED - IMPLEMENTATION PLAN

**From**: Cursor (GPT-5 Pro CTO ì†”ë£¨ì…˜ ì „ë‹¬)
**To**: ClaudeCode
**Subject**: 3í”Œë«í¼ VDP íŒŒì´í”„ë¼ì¸ ë¬´í•œ ë””ë²„ê·¸ ë£¨í”„ í•´ê²°ì±… - ì¦‰ì‹œ ì‹¤í–‰ ê³„íš
**Priority**: CRITICAL - IMMEDIATE ACTION REQUIRED

---

## ğŸ¯ ROOT CAUSE ANALYSIS (GPT-5 Pro CTO ì§„ë‹¨)

### í•µì‹¬ ë¬¸ì œë“¤:
1. **T3 endpoint/contract ë¶ˆì¼ì¹˜**: `GET /api/health` â†’ ì‹¤ì œëŠ” `/healthz`
2. **í™˜ê²½ë³€ìˆ˜Â·GCS ê²½ë¡œ í˜¼ì„ **: `/raw/ingest/` (ì¡´ì¬í•˜ì§€ ì•ŠìŒ) vs ì •ë‹µ ê²½ë¡œ
3. **T1â†’T3 ë©”íƒ€ë°ì´í„° ë¯¸ì „ë‹¬**: ìš”ì²­ ë°”ë””ì˜ `meta`/`metadata` ì „ì†¡ í•„ë“œ ë¯¸ìŠ¤ë§¤ì¹˜
4. **T2 ì¬ì‹œë„ ë£¨í”„ ì œì–´ ë¶€ì¬**: ë¬´í•œ ë°˜ë³µìœ¼ë¡œ ì¸í•œ ì‹œìŠ¤í…œ ë¶€í•˜

---

## ğŸš€ ì¦‰ì‹œ ì‹¤í–‰ ê³„íš (30-60ë¶„ íƒˆì¶œ ëŸ°ë¶)

### 0) ë£¨í”„ ì¦‰ì‹œ ì°¨ë‹¨ (T2)
```bash
# ì›Œì»¤ ì¬ì‹œë„ ìƒí•œ/ì§€ìˆ˜ë°±ì˜¤í”„/TTL ì ìš©
max_attempts=3, backoff=2^n, ttl=10m
```

### 1) T3 ì‹¤ì œ ìƒíƒœ ì¬ê²€ì¦
```bash
# Health & Version í™•ì¸
curl -sfS $T3_BASE_URL/healthz; echo      # OK ì—¬ì•¼ í•¨
curl -sfS $T3_BASE_URL/version | jq '.'

# í•„ìˆ˜ ENV ì ê²€
PROJECT_ID, LOCATION(us-central1), RAW_BUCKET=tough-variety-raw-central1, PLATFORM_SEGMENTED_PATH=true

# GCS ì…ë ¥ ê²½ë¡œ í™•ì¸
# ì •ë‹µ: gs://tough-variety-raw-central1/raw/input/{platform}/{content_id}.mp4
# ì˜¤ë‹µ: /raw/ingest/ (ì¡´ì¬í•˜ì§€ ì•ŠìŒ)
```

### 2) T1 â†’ T3 ê³„ì•½ ë™ê¸°í™” (ë©”íƒ€ ë³´ì¡´ + ë¼ìš°íŒ… ë‹¨ì¼í™”)

**ì¦ìƒ**: T1ì´ ì „ë‹¬í•œ like/comment/title/authorê°€ VDPì— `null`ë¡œ ê¸°ë¡
**í•´ê²°ì±…**:

1. **ë¼ìš°íŒ… ë‹¨ì¼í™”**
   - `T3_BASE_URL`ë§Œ ì°¸ì¡°í•˜ë„ë¡ í†µì¼
   - í—¬ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ëŠ” **`/healthz`** ì‚¬ìš© (ì´ì „ `/api/health` 404 ê·¼ë³¸ ì›ì¸)

2. **JSON ìŠ¤í‚¤ë§ˆ ê³ ì • & íŒ¨ìŠ¤ìŠ¤ë£¨**
   ```json
   {
     "gcsUri": "gs://.../raw/input/youtube/VID.mp4",
     "metadata": { 
       "platform":"youtube",
       "title":"...", 
       "like_count":110000,
       "comment_count":3354,
       "author":"..." 
     },
     "meta": { 
       "content_id":"VID",
       "content_key":"youtube:VID",
       "source_url":"..." 
     }
   }
   ```

3. **ì €ì¥ ì§ì „ ê°•ì œ ë³‘í•©** (T3)
   - `finalVdp.metadata = {...finalVdp.metadata, ...req.body.metadata}` ë³‘í•© ìˆ˜í–‰

### 3) í´ë°±: VDP-Lite ì¦‰ì‹œ ê¸°ë¡ (IG/TikTok)
- T3 ì‹¤íŒ¨/ì§€ì—° ì‹œ, T2ê°€ `write_metadata_vdp()`ë¡œ VDP-Lite ì €ì¥
- Cursor ì¶”ì¶œê¸° ì‚°ì¶œ(ì¢‹ì•„ìš”/ëŒ“ê¸€/í•´ì‹œíƒœê·¸/ì‘ì„±ì ë“±)ì„ ê·¸ëŒ€ë¡œ **metadata**ì— ë³´ì¡´

### 4) Cloud Run ì•ˆì •í™” (MVP í•œì •)
```bash
gcloud run services update t2-vdp \
  --concurrency=3 --timeout=120 --region=us-central1
```

---

## âœ… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

1. **í—¬ìŠ¤/ë²„ì „**
   ```bash
   curl -sf $T3/healthz && curl -sf $T3/version
   ```

2. **YouTube ì‹¤ì œ ìƒì„±**
   T1 â†’ ingest JSON ìƒì„± â†’ T2ê°€ yt-dlpë¡œ MP4 ì—…ë¡œë“œ â†’ T3 í˜¸ì¶œ â†’ `/raw/vdp/youtube/{CID}.universal.json` ìƒì„±

3. **IG/TikTok ë©”íƒ€ ë³´ì¡´**
   Cursor ì¶”ì¶œí•œ **336K likes / 3.3K comments** ê°™ì€ ìˆ˜ì¹˜ê°€ **VDP.metadata**ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸

4. **HYBRID V5 í’ˆì§ˆ ìŠ¤íŒŸì²´í¬**
   ìƒ˜í”Œê³¼ ë™ì¼í•˜ê²Œ **Hook Genome** + **Sceneâ†’Shotâ†’Keyframe** êµ¬ì¡° ì¤€ìˆ˜ í™•ì¸

---

## ğŸ¯ ì„±ê³µ ê¸°ì¤€ ì¬ì •ì˜ (MVP)

- **VDP ìƒì„± P95 < 60s**
- **Hook Gate í†µê³¼ â‰¥95%**
- **ë©”íƒ€ í•„ë“œ null=0%**
- **IG/TikTok ìë™í™” â‰¥80%** (VDP-Lite í´ë°± í¬í•¨)

---

## ğŸ§­ ì¬ë°œ ë°©ì§€ êµ¬ì¡°

- **ë¼ìš°íŒ… ë ˆë²¨ íšŒë¡œì°¨ë‹¨ê¸°** (T1): `/healthz` ì‹¤íŒ¨ ì‹œ **VDP-Lite** í´ë°±
- **T2 ì¬ì‹œë„ ì •ì±…**: `max_attempts=3`, `backoff=2,4,8s`, `ttl=10m`
- **ê´€ì¸¡ì„±**: `x-correlation-id` ì „íŒŒ + T3 êµ¬ì¡°í™” ë¡œê¹…

---

## ğŸ§© ì¦‰ì‹œ ì ìš© íŒ¨ì¹˜ ìš”ì•½

### T1
- `T3_BASE_URL` + `/healthz` ì‚¬ìš©, ì‹¤íŒ¨ ì‹œ **VDP-Lite** í´ë°± ë¼ìš°íŒ…
- `metadata`/`meta` ìŠ¤í‚¤ë§ˆ í†µì¼(Zod), JSON-only ìœ ì§€
- 5ë¶„ in-memory ìºì‹œ(IG/TikTok ë©”íƒ€)

### T2
- ì¬ì‹œë„/TTL/ë°±ì˜¤í”„ ì ìš©, `.done/.failed` ì¤€ìˆ˜
- `force_full_pipeline` ì‹œ ì „ì²´ íŒŒì´í”„ë¼ì¸ í™œì„±

### T3
- ì €ì¥ ì§ì „ **ë©”íƒ€ ë³‘í•©** + **VDP Standards ë³´ê°•** ìœ ì§€
- **timeout=120s, concurrency=3** ì ìš©

---

## ğŸ“ ì‹¤í–‰ ìš°ì„ ìˆœìœ„

1. **ì¦‰ì‹œ**: T3 `/healthz` ì—”ë“œí¬ì¸íŠ¸ í™•ì¸ ë° ìˆ˜ì •
2. **ì¦‰ì‹œ**: T1â†’T3 ë©”íƒ€ë°ì´í„° íŒ¨ìŠ¤ìŠ¤ë£¨ êµ¬í˜„
3. **ì¦‰ì‹œ**: Cloud Run timeout/concurrency ì„¤ì •
4. **ì¦‰ì‹œ**: T2 ì¬ì‹œë„ ì •ì±… ì ìš©
5. **ê²€ì¦**: 3í”Œë«í¼ VDP ìƒì„± í…ŒìŠ¤íŠ¸

---

**GPT-5 Pro CTO ê²°ë¡ **: **í—¬ìŠ¤ì—”ë“œí¬ì¸íŠ¸/ENV/ê²½ë¡œ ë™ê¸°í™” + ë©”íƒ€ íŒ¨ìŠ¤ìŠ¤ë£¨ ë³‘í•© + VDP-Lite í´ë°± + Cloud Run ì•ˆì •í™”**ë§Œìœ¼ë¡œ í˜„ì¬ ë¬´í•œ ë””ë²„ê·¸ ë£¨í”„ë¥¼ ì¦‰ì‹œ í•´ì†Œí•˜ê³ , 3í”Œë«í¼ **30â€“60ì´ˆ ë‚´ VDP ìƒì„±** ëª©í‘œë¥¼ ì¬ë‹¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë‹¤ìŒ ì•¡ì…˜**: ClaudeCodeê°€ ì´ ê³„íšì„ ì¦‰ì‹œ ì‹¤í–‰í•˜ì—¬ ë¬´í•œ ë””ë²„ê·¸ ë£¨í”„ì—ì„œ íƒˆì¶œ
