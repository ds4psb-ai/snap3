<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VDP RAW Generator</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="header__title">🎥 VDP RAW Generator</h1>
            <p class="header__subtitle">YouTube, Instagram, TikTok 콘텐츠 분석</p>
        </header>

        <main class="main">
            <form id="vdp-form" class="vdp-form" novalidate>
                <!-- Platform Selection -->
                <fieldset class="platform-selector" role="radiogroup" aria-labelledby="platform-legend">
                    <legend id="platform-legend" class="platform-selector__legend">
                        🎯 플랫폼 선택
                    </legend>
                    <div class="platform-options">
                        <input type="radio" id="youtube" name="platform" value="youtube" checked>
                        <label for="youtube" class="platform-option">
                            <span class="platform-option__icon">🔴</span>
                            <span class="platform-option__name">YouTube</span>
                        </label>
                        
                        <input type="radio" id="instagram" name="platform" value="instagram">
                        <label for="instagram" class="platform-option">
                            <span class="platform-option__icon">📷</span>
                            <span class="platform-option__name">Instagram</span>
                        </label>
                        
                        <input type="radio" id="tiktok" name="platform" value="tiktok">
                        <label for="tiktok" class="platform-option">
                            <span class="platform-option__icon">🎵</span>
                            <span class="platform-option__name">TikTok</span>
                        </label>
                    </div>
                </fieldset>

                <!-- Platform Forms Container -->
                <div class="platform-forms">
                    <!-- YouTube Form -->
                    <div id="youtube-form" class="platform-form">
                        <div class="form-group">
                            <label for="youtube-source-url" class="form-label">
                                YouTube URL
                                <span class="form-label__required">*</span>
                            </label>
                            <input 
                                type="url" 
                                id="youtube-source-url" 
                                name="source_url"
                                class="form-input"
                                placeholder="https://youtube.com/watch?v=..."
                                required
                                onblur="autoExtractYouTubeMetadata()"
                            >
                            <div class="form-help">YouTube는 100% 자동화되어 추가 입력이 필요없습니다.</div>
                            <div id="youtube-extraction-status" class="extraction-status"></div>
                        </div>
                    </div>

                    <!-- Instagram Form -->
                    <div id="instagram-form" class="platform-form">
                        <div class="form-group">
                            <label for="instagram-source-url" class="form-label">
                                Instagram URL
                                <span class="form-label__required">*</span>
                            </label>
                            <input 
                                type="url" 
                                id="instagram-source-url" 
                                name="source_url"
                                class="form-input"
                                placeholder="https://instagram.com/reel/..."
                                required
                                onblur="autoExtractInstagramMetadata()"
                            >
                            <div class="form-help">URL을 입력하면 자동으로 추출 가능한 데이터가 채워집니다.</div>
                            <div id="instagram-extraction-status" class="extraction-status"></div>
                        </div>
                        
                        <!-- 사용자 직접 입력 필드 (상단 그룹) -->
                        <div class="user-input-section">
                            <h3 class="section-title">📝 필수 입력 항목</h3>
                            
                            <!-- 조회수 -->
                            <div class="form-group">
                                <label class="form-label">조회수 (필수 입력)</label>
                                <input type="number" id="instagram-view-count" name="view_count" class="form-input" placeholder="조회수를 입력하세요" required>
                            </div>
                            
                            <!-- 공유수 -->
                            <div class="form-group">
                                <label class="form-label">공유수 (필수 입력)</label>
                                <input type="number" id="instagram-share-count-input" name="share_count" class="form-input" placeholder="공유수를 입력하세요" required>
                                <div class="form-help">Instagram은 공유수를 공개하지 않아 수동 입력이 필요합니다</div>
                            </div>
                            
                            <!-- 베스트 댓글 -->
                            <div class="form-group">
                                <label class="form-label">베스트 댓글 (수동 입력, 최대 5개)</label>
                                <div class="comments-input-group">
                                    <input type="text" id="instagram-comment-1" name="top_comment_1" class="form-input" placeholder="1번째 베스트 댓글을 입력하세요">
                                    <input type="text" id="instagram-comment-2" name="top_comment_2" class="form-input" placeholder="2번째 베스트 댓글을 입력하세요">
                                    <input type="text" id="instagram-comment-3" name="top_comment_3" class="form-input" placeholder="3번째 베스트 댓글을 입력하세요">
                                    <input type="text" id="instagram-comment-4" name="top_comment_4" class="form-input" placeholder="4번째 베스트 댓글을 입력하세요">
                                    <input type="text" id="instagram-comment-5" name="top_comment_5" class="form-input" placeholder="5번째 베스트 댓글을 입력하세요">
                                </div>
                                <div class="form-help">댓글은 자동 추출되지 않으므로 수동으로 입력해주세요</div>
                            </div>
                            
                            <!-- 원본 유형 -->
                            <div class="form-group">
                                <label for="instagram-video-origin" class="form-label">
                                    원본 유형
                                    <span class="form-label__required">*</span>
                                </label>
                                <select id="instagram-video-origin" name="video_origin" class="form-select" required>
                                    <option value="unknown">Unknown</option>
                                    <option value="real_footage">Real footage</option>
                                    <option value="ai_generated" selected>AI generated</option>
                                </select>
                                <div class="form-help">영상이 실제 촬영인지, AI 생성인지 선택하세요</div>
                            </div>
                        </div>

                        <!-- 자동 채워지는 메타데이터 (하단 그룹) -->
                        <div id="instagram-metadata-display" class="metadata-display auto-filled-section" style="display: none;">
                            <h3 class="section-title">🤖 자동 추출 항목</h3>
                            <div class="metadata-grid">
                                <div class="metadata-item">
                                    <label class="form-label">좋아요 (자동 추출)</label>
                                    <input type="number" id="instagram-like-count" name="like_count" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">댓글 수 (자동 추출)</label>
                                    <input type="number" id="instagram-comment-count" name="comment_count" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">작성자 (자동 추출)</label>
                                    <input type="text" id="instagram-author" name="author" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">해시태그 (자동 추출)</label>
                                    <input type="text" id="instagram-hashtags" name="hashtags" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">업로드 날짜 (자동 추출)</label>
                                    <input type="date" id="instagram-upload-date" name="upload_date" class="form-input" readonly>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TikTok Form -->
                    <div id="tiktok-form" class="platform-form">
                        <div class="form-group">
                            <label for="tiktok-source-url" class="form-label">
                                TikTok URL
                                <span class="form-label__required">*</span>
                            </label>
                            <input 
                                type="url" 
                                id="tiktok-source-url" 
                                name="source_url"
                                class="form-input"
                                placeholder="https://tiktok.com/@user/video/1234567890"
                                required
                                onblur="autoExtractTikTokMetadata()"
                            >
                            <div class="form-help">URL을 입력하면 자동으로 추출 가능한 데이터가 채워집니다.</div>
                            <div id="tiktok-extraction-status" class="extraction-status"></div>
                        </div>
                        
                        <!-- 사용자 직접 입력 필드 (상단 그룹) -->
                        <div class="user-input-section">
                            <h3 class="section-title">📝 필수 입력 항목</h3>
                            
                            <!-- 베스트 댓글 -->
                            <div class="form-group">
                                <label class="form-label">베스트 댓글 (수동 입력, 최대 5개)</label>
                                <div class="comments-input-group">
                                    <input type="text" id="tiktok-comment-1" name="top_comment_1" class="form-input" placeholder="1번째 베스트 댓글을 입력하세요">
                                    <input type="text" id="tiktok-comment-2" name="top_comment_2" class="form-input" placeholder="2번째 베스트 댓글을 입력하세요">
                                    <input type="text" id="tiktok-comment-3" name="top_comment_3" class="form-input" placeholder="3번째 베스트 댓글을 입력하세요">
                                    <input type="text" id="tiktok-comment-4" name="top_comment_4" class="form-input" placeholder="4번째 베스트 댓글을 입력하세요">
                                    <input type="text" id="tiktok-comment-5" name="top_comment_5" class="form-input" placeholder="5번째 베스트 댓글을 입력하세요">
                                </div>
                                <div class="form-help">댓글은 자동 추출되지 않으므로 수동으로 입력해주세요</div>
                            </div>
                            
                            <!-- 원본 유형 -->
                            <div class="form-group">
                                <label for="tiktok-video-origin" class="form-label">
                                    원본 유형
                                    <span class="form-label__required">*</span>
                                </label>
                                <select id="tiktok-video-origin" name="video_origin" class="form-select" required>
                                    <option value="unknown">Unknown</option>
                                    <option value="real_footage">Real footage</option>
                                    <option value="ai_generated" selected>AI generated</option>
                                </select>
                                <div class="form-help">영상이 실제 촬영인지, AI 생성인지 선택하세요</div>
                            </div>
                        </div>

                        <!-- 자동 채워지는 메타데이터 (하단 그룹) -->
                        <div id="tiktok-metadata-display" class="metadata-display auto-filled-section" style="display: none;">
                            <h3 class="section-title">🤖 자동 추출 항목</h3>
                            <div class="metadata-grid">
                                <div class="metadata-item">
                                    <label class="form-label">조회수 (자동 추출)</label>
                                    <input type="number" id="tiktok-view-count" name="view_count" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">좋아요 (자동 추출)</label>
                                    <input type="number" id="tiktok-like-count" name="like_count" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">댓글 수 (자동 추출)</label>
                                    <input type="number" id="tiktok-comment-count" name="comment_count" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">공유 수 (자동 추출)</label>
                                    <input type="number" id="tiktok-share-count" name="share_count" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">작성자 (자동 추출)</label>
                                    <input type="text" id="tiktok-author" name="author" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">해시태그 (자동 추출)</label>
                                    <input type="text" id="tiktok-hashtags" name="hashtags" class="form-input" placeholder="자동으로 채워집니다" readonly>
                                </div>
                                <div class="metadata-item">
                                    <label class="form-label">업로드 날짜 (자동 추출)</label>
                                    <input type="date" id="tiktok-upload-date" name="upload_date" class="form-input" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button - Moved up for better UX -->
                <div class="form-actions" style="margin: 2rem 0;">
                    <button type="submit" id="submit-btn" class="submit-btn" disabled>
                        <span class="submit-btn__icon">🚀</span>
                        <span class="submit-btn__text">콘텐츠 분석 시작</span>
                    </button>
                </div>

                <!-- VDP Extractor Selection -->
                <fieldset class="extractor-selector" role="radiogroup" aria-labelledby="extractor-legend">
                    <legend id="extractor-legend" class="extractor-selector__legend">
                        🔧 VDP 추출기 선택
                    </legend>
                    <div class="extractor-options">
                        <input type="radio" id="main-extractor" name="extractor" value="main" checked>
                        <label for="main-extractor" class="extractor-option">
                            <span class="extractor-option__icon">🎯</span>
                            <span class="extractor-option__name">Main VDP</span>
                            <span class="extractor-option__desc">Gemini 2.5 Pro | GitHub 호환</span>
                            <span class="extractor-option__status extractor-option__status--ready">Ready</span>
                        </label>
                        
                        <input type="radio" id="vertex-extractor" name="extractor" value="vertex">
                        <label for="vertex-extractor" class="extractor-option">
                            <span class="extractor-option__icon">⚡</span>
                            <span class="extractor-option__name">Vertex VDP</span>
                            <span class="extractor-option__desc">Hook Genome | Evidence Pack</span>
                            <span id="vertex-status" class="extractor-option__status extractor-option__status--warning">OPEN</span>
                        </label>
                    </div>
                </fieldset>
            </form>

            <!-- Progress Section -->
            <div id="progress-section" class="progress-section" style="display: none;">
                <div class="progress-header">
                    <h2 class="progress-title">처리 중...</h2>
                    <div class="progress-meta">
                        <span id="progress-platform" class="progress-platform"></span>
                        <span id="progress-job-id" class="progress-job-id"></span>
                    </div>
                </div>
                
                <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                    <div id="progress-fill" class="progress-bar__fill" style="width: 0%"></div>
                </div>
                
                <div id="progress-status" class="progress-status">초기화 중...</div>
                
                <div class="progress-actions">
                    <button id="cancel-btn" class="btn btn--secondary">취소</button>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results-section" class="results-section" style="display: none;">
                <div class="results-header">
                    <h2 class="results-title">분석 결과</h2>
                    <div class="results-meta">
                        <span id="results-platform" class="results-platform"></span>
                        <span id="results-timestamp" class="results-timestamp"></span>
                    </div>
                </div>
                
                <div id="results-content" class="results-content">
                    <!-- Results will be populated here -->
                </div>
                
                <div class="results-actions">
                    <button id="new-analysis-btn" class="btn btn--primary">새 분석</button>
                    <button id="download-btn" class="btn btn--secondary">결과 다운로드</button>
                </div>
            </div>
        </main>
    </div>

    <script src="scripts/main.js"></script>
</body>
</html>