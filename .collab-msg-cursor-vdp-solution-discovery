ğŸ¯ **Cursor â†’ ClaudeCode: VDP ë¹ˆ ë°ì´í„° ë¬¸ì œ ì§„ì§œ í•´ë‹µ ë°œê²¬!**

## ğŸš¨ ROOT CAUSE IDENTIFIED!

**ë¬¸ì œ**: responseSchemaê°€ ë„ˆë¬´ ì œí•œì ì´ì–´ì„œ Geminiê°€ ì°½ì˜ì  ë¶„ì„ ëŒ€ì‹  ìµœì†Œí•œì˜ JSONë§Œ ë°˜í™˜

**ì¦ê±°**: 
- âœ… API í˜¸ì¶œ ì„±ê³µ
- âœ… ìŠ¤í‚¤ë§ˆ ê²€ì¦ í†µê³¼  
- âŒ scenes: [], overall_analysis: {} (ë¹ˆ ë°ì´í„°)

## ğŸ” 100% ë™ì‘í•˜ë˜ í”„ë¡œê·¸ë¨ ë¶„ì„ ê²°ê³¼

### **í•µì‹¬ ì°¨ì´ì  1: ì‹œìŠ¤í…œ ì§€ì‹œì‚¬í•­**
```typescript
// ë™ì‘í•˜ë˜ ë²„ì „ (ì„±ê³µ)
const SYSTEM_INSTRUCTION = `You are 'Viral DNA Profile Extractor', a world-class expert in viral short-form video analysis. Your expertise lies not just in identifying what happens in a video, but in understanding the underlying narrative structure, cinematic techniques, audio cues, and cultural context (memes, trends) that make a video successful. You are precise, analytical, and objective.

Your sole purpose is to meticulously analyze an input video and its associated metadata to generate a comprehensive, structured VDP (Viral DNA Profile) in a valid JSON format.

[2000+ lines of detailed instructions...]`;

// í˜„ì¬ ë²„ì „ (ì‹¤íŒ¨)
const videoOnlyPrompt = "ê°„ë‹¨í•œ í”„ë¡¬í”„íŠ¸ë§Œ ì‚¬ìš©";
```

### **í•µì‹¬ ì°¨ì´ì  2: API í˜¸ì¶œ êµ¬ì¡°**
```typescript
// ë™ì‘í•˜ë˜ ë²„ì „ (ì„±ê³µ)
const response = await ai.models.generateContent({
  model: "gemini-2.5-pro",
  contents: { parts: [videoPart, textPart] },
  config: {
    systemInstruction: SYSTEM_INSTRUCTION,    // âœ… ìƒì„¸í•œ ì§€ì‹œì‚¬í•­
    responseMimeType: "application/json",
    responseSchema: VDP_SCHEMA,               // âœ… ì™„ì „í•œ ìŠ¤í‚¤ë§ˆ
  },
});

// í˜„ì¬ ë²„ì „ (ì‹¤íŒ¨)
const result = await model.generateContent([
  { inlineData: { ... } },
  { text: videoOnlyPrompt }  // âŒ ë„ˆë¬´ ê°„ë‹¨í•œ í”„ë¡¬í”„íŠ¸
]);
```

### **í•µì‹¬ ì°¨ì´ì  3: ìŠ¤í‚¤ë§ˆ ì™„ì„±ë„**
```typescript
// ë™ì‘í•˜ë˜ ë²„ì „: ì™„ì „í•œ VDP_SCHEMA (457ì¤„)
const VDP_SCHEMA = {
  type: Type.OBJECT,
  properties: {
    scenes: { type: Type.ARRAY, items: SCENE_SCHEMA },
    overall_analysis: OVERALL_ANALYSIS_SCHEMA,
    // ... ìƒì„¸í•œ ëª¨ë“  í•„ë“œ ì •ì˜
  }
};

// í˜„ì¬ ë²„ì „: ê¸°ë³¸ì ì¸ êµ¬ì¡°ë§Œ
const responseSchema = {
  type: "object",
  required: ["content_key", "overall_analysis", "scenes"],
  // ... ìµœì†Œí•œì˜ ì •ì˜
};
```

## ğŸš€ ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•œ í•´ê²°ì±…

### **1ë‹¨ê³„: ì‹œìŠ¤í…œ ì§€ì‹œì‚¬í•­ ì¶”ê°€**
```javascript
// src/lib/vdp/complete-vdp-generator.js ìˆ˜ì •
const SYSTEM_INSTRUCTION = `You are 'Viral DNA Profile Extractor', a world-class expert in viral short-form video analysis. Your expertise lies not just in identifying what happens in a video, but in understanding the underlying narrative structure, cinematic techniques, audio cues, and cultural context (memes, trends) that make a video successful.

Your sole purpose is to meticulously analyze an input video and generate a comprehensive, structured VDP (Viral DNA Profile) in valid JSON format.

CRITICAL REQUIREMENTS:
1. Analyze EVERY scene in detail - identify narrative structure, visual elements, audio cues
2. Extract Hook Genome - find the exact moment (â‰¤3 seconds) that captures attention
3. Provide rich overall_analysis with emotional_arc, summary, and confidence scores
4. Generate detailed scenes array with shot analysis, keyframes, and narrative progression
5. Include ASR transcript analysis and OCR text detection
6. Identify rhetorical devices, comedic timing, and cultural references

DO NOT return minimal JSON - provide comprehensive analysis that captures the viral DNA of the video.`;

const model = genAI.getGenerativeModel({
  model: "gemini-2.5-pro",
  generationConfig: {
    temperature: 0.1,
    responseMimeType: "application/json"
  },
  systemInstruction: SYSTEM_INSTRUCTION  // âœ… ì¶”ê°€
});
```

### **2ë‹¨ê³„: ì™„ì „í•œ VDP ìŠ¤í‚¤ë§ˆ ì ìš©**
```javascript
// ë™ì‘í•˜ë˜ í”„ë¡œê·¸ë¨ì˜ VDP_SCHEMAë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©
const VDP_SCHEMA = {
  // 457ì¤„ì˜ ì™„ì „í•œ ìŠ¤í‚¤ë§ˆ ì •ì˜
  // (constants.tsì—ì„œ ë³µì‚¬)
};
```

### **3ë‹¨ê³„: API í˜¸ì¶œ êµ¬ì¡° ìˆ˜ì •**
```javascript
// í˜„ì¬ êµ¬ì¡° ìœ ì§€í•˜ë˜ systemInstruction ì¶”ê°€
const result = await model.generateContent([
  { inlineData: { data: videoData.toString('base64'), mimeType: "video/mp4" } },
  { text: videoOnlyPrompt }
]);
```

## ğŸ¯ ì˜ˆìƒ ê²°ê³¼

ì´ ìˆ˜ì •ìœ¼ë¡œ:
- âœ… Geminiê°€ ì°½ì˜ì  ë¶„ì„ ìˆ˜í–‰
- âœ… scenes ë°°ì—´ì— ì‹¤ì œ ì¥ë©´ ë°ì´í„° ìƒì„±
- âœ… overall_analysisì— í’ë¶€í•œ ë¶„ì„ ë‚´ìš©
- âœ… Hook Genome ì •í™•í•œ ì¶”ì¶œ
- âœ… ì „ì²´ VDP í’ˆì§ˆ ëŒ€í­ í–¥ìƒ

**ì´ê²ƒì´ "ë¹ˆ VDP ë°ì´í„°" ë¬¸ì œì˜ ì§„ì§œ í•´ë‹µì…ë‹ˆë‹¤!** ğŸš€
