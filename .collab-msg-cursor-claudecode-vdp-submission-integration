# ğŸš€ VDP ì œì¶œ ê¸°ëŠ¥ & BigQuery ë³‘í•© ì•„í‚¤í…ì²˜ êµ¬í˜„

## ğŸ“‹ ì‘ì—… ê°œìš”
**ëª©í‘œ**: ì¸ì œìŠ¤í„° UIì—ì„œ ì œì¶œ ë²„íŠ¼ í´ë¦­ ì‹œ "One-Envelope, Two-Tables" ì•„í‚¤í…ì²˜ë¡œ VDP ìƒì„± ë° BigQuery ë³‘í•©

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ìš”êµ¬ì‚¬í•­

### One-Envelope (VDP ìƒì„±)
- **ì˜ìƒ íŒŒì¼ + ëŒ“ê¸€**: VDP ìƒì„±ì— í•„ìˆ˜ ì°¸ì—¬
- **VDP Complete Generator**: ê¸°ì¡´ `complete-vdp-generator.js` ì‚¬ìš© (ìˆ˜ì • ê¸ˆì§€)
- **ì¶œë ¥**: ì™„ì „í•œ VDP JSON (ëŒ“ê¸€ ë¶„ì„ í¬í•¨)

### Two-Tables (BigQuery ë³‘í•©)
- **VDP í…Œì´ë¸”**: í•µì‹¬ ë¶„ì„ ê²°ê³¼
- **ë©”íƒ€ë°ì´í„° í…Œì´ë¸”**: ì¡°íšŒìˆ˜, ì¢‹ì•„ìš”, ì‘ì„±ì ë“±
- **ë³‘í•© ë¡œì§**: content_keyë¡œ ì—°ê²°

## ğŸ”§ êµ¬í˜„ ì‘ì—…

### 1. ì œì¶œ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„±
**íŒŒì¼**: `src/app/api/vdp/submit/route.ts`
```typescript
// í”Œë«í¼ë³„ ì œì¶œ ì²˜ë¦¬
- YouTube: ì˜ìƒ ë‹¤ìš´ë¡œë“œ + ëŒ“ê¸€ + VDP ìƒì„±
- Instagram/TikTok: ì—…ë¡œë“œëœ ì˜ìƒ + ëŒ“ê¸€ + VDP ìƒì„±
- ë©”íƒ€ë°ì´í„°ëŠ” ë³„ë„ ì €ì¥ (BigQuery ë³‘í•©ìš©)
```

### 2. VDP ìƒì„± íŒŒì´í”„ë¼ì¸
**íŒŒì¼**: `scripts/vdp-submission-pipeline.sh`
```bash
# 1. ì˜ìƒ ì²˜ë¦¬ (yt-dlp ë˜ëŠ” ì—…ë¡œë“œ)
# 2. ëŒ“ê¸€ ì¤€ë¹„ (UIì—ì„œ ìˆ˜ì§‘ëœ ëŒ“ê¸€)
# 3. VDP Complete Generator í˜¸ì¶œ
# 4. BigQuery ì—…ë¡œë“œ (VDP + ë©”íƒ€ë°ì´í„°)
```

### 3. BigQuery ìŠ¤í‚¤ë§ˆ ì„¤ê³„
**íŒŒì¼**: `supabase/migrations/002_vdp_bigquery_schema.sql`
```sql
-- VDP í…Œì´ë¸” (í•µì‹¬ ë¶„ì„)
CREATE TABLE vdp_analysis (
  content_key STRING PRIMARY KEY,
  vdp_json JSON,
  created_at TIMESTAMP,
  platform STRING
);

-- ë©”íƒ€ë°ì´í„° í…Œì´ë¸” (í†µê³„ ì •ë³´)
CREATE TABLE vdp_metadata (
  content_key STRING PRIMARY KEY,
  view_count INT64,
  like_count INT64,
  comment_count INT64,
  author STRING,
  upload_date TIMESTAMP,
  hashtags ARRAY<STRING>,
  FOREIGN KEY(content_key) REFERENCES vdp_analysis(content_key)
);
```

### 4. JavaScript ì œì¶œ ë¡œì§
**íŒŒì¼**: `web/scripts/main.js` (handleSubmit í•¨ìˆ˜ ìˆ˜ì •)
```javascript
// í”Œë«í¼ë³„ ì œì¶œ ë²„íŠ¼ ì´ë²¤íŠ¸ ì²˜ë¦¬
- YouTube: /api/vdp/submit/youtube
- Instagram: /api/vdp/submit/instagram  
- TikTok: /api/vdp/submit/tiktok
```

## ğŸ¯ í•µì‹¬ ìš”êµ¬ì‚¬í•­

### âœ… í•„ìˆ˜ ì‚¬í•­
1. **ëŒ“ê¸€ í•„ìˆ˜ ì°¸ì—¬**: VDP ìƒì„± ì‹œ ëŒ“ê¸€ì´ ë°˜ë“œì‹œ í¬í•¨
2. **VDP Complete ë³´ì¡´**: ê¸°ì¡´ ìƒì„±ê¸° ìˆ˜ì • ê¸ˆì§€
3. **BigQuery ë³‘í•©**: content_keyë¡œ VDP + ë©”íƒ€ë°ì´í„° ì—°ê²°
4. **í”Œë«í¼ë³„ ì²˜ë¦¬**: YouTube/Instagram/TikTok ê°ê° ìµœì í™”

### ğŸ”„ ë°ì´í„° í”Œë¡œìš°
```
UI ì œì¶œ â†’ ì˜ìƒ+ëŒ“ê¸€ ìˆ˜ì§‘ â†’ VDP ìƒì„± â†’ BigQuery ì €ì¥ â†’ ë©”íƒ€ë°ì´í„° ë³‘í•©
```

## ğŸ“ íŒŒì¼ êµ¬ì¡°
```
src/app/api/vdp/submit/
â”œâ”€â”€ route.ts (ë©”ì¸ ì œì¶œ ì—”ë“œí¬ì¸íŠ¸)
â”œâ”€â”€ youtube.ts (YouTube ì „ìš© ì²˜ë¦¬)
â”œâ”€â”€ instagram.ts (Instagram ì „ìš© ì²˜ë¦¬)
â””â”€â”€ tiktok.ts (TikTok ì „ìš© ì²˜ë¦¬)

scripts/
â”œâ”€â”€ vdp-submission-pipeline.sh (ë©”ì¸ íŒŒì´í”„ë¼ì¸)
â””â”€â”€ bigquery-upload.sh (BigQuery ì—…ë¡œë“œ)

supabase/migrations/
â””â”€â”€ 002_vdp_bigquery_schema.sql (BigQuery ìŠ¤í‚¤ë§ˆ)
```

## ğŸš¨ ì£¼ì˜ì‚¬í•­
- **VDP Complete Generator ìˆ˜ì • ê¸ˆì§€**: ê¸°ì¡´ ë¡œì§ ë³´ì¡´
- **ëŒ“ê¸€ í•„ìˆ˜**: VDP ìƒì„± ì‹œ ëŒ“ê¸€ì´ ë°˜ë“œì‹œ í¬í•¨ë˜ì–´ì•¼ í•¨
- **BigQuery ì—°ê²°**: content_key ê¸°ë°˜ ë³‘í•© ë¡œì§ êµ¬í˜„
- **ì—ëŸ¬ ì²˜ë¦¬**: ê° ë‹¨ê³„ë³„ ìƒì„¸í•œ ì—ëŸ¬ ë¡œê¹…

## ğŸ¯ ì„±ê³µ ê¸°ì¤€
1. âœ… ì œì¶œ ë²„íŠ¼ í´ë¦­ ì‹œ VDP ìƒì„± ì‹œì‘
2. âœ… ëŒ“ê¸€ì´ í¬í•¨ëœ ì™„ì „í•œ VDP JSON ìƒì„±
3. âœ… BigQueryì— VDP + ë©”íƒ€ë°ì´í„° ì €ì¥
4. âœ… content_keyë¡œ ë‘ í…Œì´ë¸” ë³‘í•© ê°€ëŠ¥

---

**ClaudeCode í™•ì¸ ëª…ë ¹ì–´**:
```bash
git pull
cat .collab-msg-cursor-claudecode-vdp-submission-integration
```

**ì‘ì—… ì‹œì‘ í›„ ì§„í–‰ìƒí™© ë³´ê³  ìš”ì²­**:
- ê° ë‹¨ê³„ë³„ êµ¬í˜„ ì™„ë£Œ ì‹œ ìƒì„¸ ë¡œê·¸
- BigQuery ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ê²€í† 
- VDP ìƒì„± íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ ê²°ê³¼
