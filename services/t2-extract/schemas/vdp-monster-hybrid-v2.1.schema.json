{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "VDP Monster Hybrid v2.1 (OLD Strengths + Hook Genome + 16K Optimization)",
  "type": "object",
  "required": ["content_id", "metadata", "overall_analysis", "scenes", "product_mentions", "service_mentions"],
  "properties": {
    "content_id": { "type": "string", "minLength": 1 },
    "default_lang": { "type": "string", "default": "en" },
    "metadata": {
      "type": "object",
      "required": ["platform", "source_url", "upload_date", "view_count", "like_count", "comment_count", "share_count", "hashtags", "video_origin", "cta_types", "original_sound"],
      "properties": {
        "platform": { "type": "string" },
        "source_url": { "type": "string", "minLength": 1 },
        "upload_date": { "type": "string" },
        "view_count": { "type": "integer" },
        "like_count": { "type": "integer" },
        "comment_count": { "type": "integer" },
        "share_count": { "type": "integer" },
        "hashtags": { "type": "array", "items": { "type": "string" } },
        "video_origin": { "type": "string", "enum": ["AI-Generated", "Real-Footage", "Unknown"] },
        "cta_types": { "type": "array", "items": { "type": "string" } },
        "original_sound": {
          "type": "object",
          "properties": { 
            "id": { "type": "string", "nullable": true }, 
            "title": { "type": "string", "nullable": true } 
          },
          "required": ["id", "title"]
        }
      }
    },
    "overall_analysis": {
      "type": "object",
      "required": ["summary", "emotional_arc", "audience_reaction", "safety_flags", "confidence", "graph_refs", "hookGenome"],
      "properties": {
        "summary": { 
          "type": "string", 
          "maxLength": 700,
          "description": "Comprehensive summary of the video's plot and message in English" 
        },
        "emotional_arc": { 
          "type": "string", 
          "maxLength": 350,
          "description": "Description of the emotional journey from start to finish in English" 
        },
        "audience_reaction": {
          "type": "object",
          "properties": {
            "analysis": { 
              "type": "string", 
              "maxLength": 300,
              "description": "Deep analysis of psychological and emotional reactions" 
            },
            "common_reactions": { 
              "type": "array", 
              "maxItems": 5,
              "items": { 
                "type": "string",
                "maxLength": 40
              } 
            },
            "notable_comments": {
              "type": "array",
              "maxItems": 3,
              "items": {
                "type": "object",
                "properties": {
                  "text": { "type": "string", "description": "Original verbatim comment text" },
                  "lang": { "type": "string", "description": "BCP-47 language code" },
                  "translation_en": { "type": "string", "nullable": true }
                },
                "required": ["text", "lang"]
              }
            },
            "overall_sentiment": { 
              "type": "string",
              "enum": ["very_positive", "positive", "mixed", "negative"]
            }
          },
          "required": ["analysis", "common_reactions", "notable_comments", "overall_sentiment"]
        },
        "safety_flags": { "type": "array", "items": { "type": "string" } },
        "confidence": {
          "type": "object",
          "properties": {
            "overall": { "type": "number" },
            "scene_classification": { "type": "number" },
            "device_analysis": { "type": "number" }
          },
          "required": ["overall", "scene_classification", "device_analysis"]
        },
        "graph_refs": {
          "type": "object",
          "properties": {
            "potential_meme_template": { 
              "type": "string",
              "maxLength": 120
            },
            "related_hashtags": { "type": "array", "items": { "type": "string" } }
          },
          "required": ["potential_meme_template", "related_hashtags"]
        },
        "hookGenome": {
          "type": "object",
          "required": ["start_sec", "end_sec", "pattern_code", "strength_score"],
          "properties": {
            "start_sec": { 
              "type": "number",
              "maximum": 3,
              "description": "Hook start time (must be â‰¤3s)"
            },
            "end_sec": { "type": "number" },
            "pattern_code": { "type": "string" },
            "strength_score": { 
              "type": "number", 
              "minimum": 0, 
              "maximum": 1,
              "description": "Hook strength (0-1 scale)"
            },
            "trigger_modalities": { 
              "type": "array", 
              "items": { "type": "string" } 
            },
            "microbeats_sec": { 
              "type": "array", 
              "items": { "type": "number" } 
            }
          }
        },
        "asr_excerpt": { 
          "type": "string", 
          "nullable": true,
          "description": "Key 2-4 sentences from transcript"
        },
        "asr_lang": { "type": "string", "nullable": true, "description": "BCP-47 code for transcript language" },
        "asr_translation_en": { "type": "string", "nullable": true },
        "ocr_text": {
          "type": "array",
          "nullable": true,
          "maxItems": 5,
          "items": {
            "type": "object",
            "properties": {
              "text": { "type": "string" },
              "lang": { "type": "string", "description": "BCP-47 language code" },
              "translation_en": { "type": "string", "nullable": true }
            },
            "required": ["text", "lang"]
          }
        }
      }
    },
    "scenes": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["scene_id", "time_start", "time_end", "duration_sec", "narrative_unit", "setting", "shots"],
        "properties": {
          "scene_id": { "type": "string", "description": "Format: 'S<NN>_<Theme>' (e.g., 'S01_WakingUpPanic')" },
          "time_start": { "type": "number" },
          "time_end": { "type": "number" },
          "duration_sec": { "type": "number" },
          "importance": { "type": "string", "enum": ["critical", "normal"] },
          "narrative_unit": {
            "type": "object",
            "required": ["narrative_role", "summary", "dialogue", "rhetoric", "comedic_device"],
            "properties": {
              "narrative_role": { "type": "string" },
              "summary": { "type": "string", "description": "Scene events and actions in English" },
              "dialogue": { "type": "string", "description": "Full transcript in original language" },
              "dialogue_lang": { "type": "string", "nullable": true, "description": "BCP-47 language tag" },
              "dialogue_translation_en": { "type": "string", "nullable": true },
              "rhetoric": { "type": "array", "items": { "type": "string" } },
              "comedic_device": { "type": "array", "items": { "type": "string" } }
            }
          },
          "setting": {
            "type": "object",
            "required": ["location", "visual_style", "audio_style"],
            "properties": {
              "location": { "type": "string" },
              "visual_style": {
                "type": "object",
                "required": ["cinematic_properties", "lighting", "mood_palette", "edit_grammar"],
                "properties": {
                  "cinematic_properties": { "type": "string", "description": "Camera work, composition, and cinematic techniques" },
                  "lighting": { "type": "string", "description": "Lighting style and effect" },
                  "mood_palette": { "type": "array", "items": { "type": "string" }, "description": "Color palette and mood keywords" },
                  "edit_grammar": {
                    "type": "object",
                    "required": ["cut_speed", "camera_style", "subtitle_style"],
                    "properties": {
                      "cut_speed": { "type": "string" },
                      "camera_style": { "type": "string" },
                      "subtitle_style": { "type": "string", "enum": ["none", "broadcast_entertainment", "news_caption", "simple_white_text"] }
                    }
                  }
                }
              },
              "audio_style": {
                "type": "object",
                "required": ["music", "ambient_sound", "tone", "audio_events"],
                "properties": {
                  "music": { "type": "string" },
                  "ambient_sound": { "type": "string" },
                  "tone": { "type": "string" },
                  "audio_events": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": ["timestamp", "event", "description", "intensity"],
                      "properties": {
                        "timestamp": { "type": "number" },
                        "event": { "type": "string", "enum": ["music_starts", "music_stops", "music_change", "music_crescendo", "narration_starts", "critical_sfx", "laughter", "singing_starts", "abrupt_sound_change"] },
                        "description": { "type": "string" },
                        "intensity": { "type": "string" }
                      }
                    }
                  }
                }
              }
            }
          },
          "shots": {
            "type": "array",
            "description": "MANDATORY: Individual shots that comprise the scene",
            "minItems": 1,
            "maxItems": 3,
            "items": {
              "type": "object",
              "required": ["shot_id", "start", "end", "camera", "composition", "keyframes", "confidence"],
              "properties": {
                "shot_id": { "type": "string", "description": "Unique ID within the scene" },
                "start": { "type": "number", "description": "Absolute start time relative to video start" },
                "end": { "type": "number", "description": "Absolute end time relative to video start" },
                "camera": {
                  "type": "object",
                  "required": ["shot", "angle", "move"],
                  "properties": {
                    "shot": { "type": "string", "enum": ["ECU", "CU", "MCU", "MS", "MLS", "WS", "EWS"] },
                    "angle": { "type": "string", "enum": ["eye", "high", "low", "overhead", "dutch"] },
                    "move": { "type": "string", "enum": ["static", "pan", "tilt", "dolly", "truck", "handheld", "crane", "zoom"] }
                  }
                },
                "composition": {
                  "type": "object",
                  "required": ["grid"],
                  "properties": {
                    "grid": { "type": "string", "enum": ["left_third", "center", "right_third", "symmetry"] },
                    "notes": { "type": "array", "items": { "type": "string" }, "maxItems": 2, "description": "MANDATORY: 0-2 composition notes in English" }
                  }
                },
                "keyframes": {
                  "type": "array",
                  "minItems": 2,
                  "maxItems": 4,
                  "description": "MANDATORY: Keyframe analysis",
                  "items": {
                    "type": "object",
                    "required": ["role", "desc"],
                    "properties": {
                      "role": { "type": "string", "enum": ["start", "mid", "peak", "end"] },
                      "t_rel_shot": { "type": "number", "nullable": true, "description": "Relative time within shot" },
                      "desc": { "type": "string", "description": "Natural language keyframe description in English" }
                    }
                  }
                },
                "confidence": { "type": "string", "enum": ["low", "medium", "high"] }
              }
            }
          }
        }
      }
    },
    "product_mentions": {
      "type": "array",
      "maxItems": 5,
      "items": {
        "type": "object",
        "required": ["type", "name", "sources", "evidence", "promotion", "confidence"],
        "properties": {
          "type": { "type": "string", "enum": ["product", "service"] },
          "name": { "type": "string" },
          "category": { "type": "string", "nullable": true },
          "sources": { "type": "array", "items": { "type": "string", "enum": ["asr", "ocr", "platform_caption", "platform_ui", "visual"] } },
          "time_ranges": { "type": "array", "items": { "type": "array", "items": { "type": "number" }, "minItems": 2, "maxItems": 2 }, "nullable": true },
          "evidence": { "type": "array", "items": { "type": "string" }, "minItems": 1 },
          "promotion": {
            "type": "object",
            "required": ["status", "signals"],
            "properties": {
              "status": { "type": "string", "enum": ["paid", "gifted", "affiliate", "organic", "unknown"] },
              "signals": { "type": "array", "items": { "type": "string" } }
            }
          },
          "confidence": { "type": "string", "enum": ["low", "medium", "high"] }
        }
      }
    },
    "service_mentions": {
      "type": "array",
      "maxItems": 5,
      "items": {
        "type": "object",
        "required": ["type", "name", "sources", "evidence", "promotion", "confidence"],
        "properties": {
          "type": { "type": "string", "enum": ["product", "service"] },
          "name": { "type": "string" },
          "category": { "type": "string", "nullable": true },
          "sources": { "type": "array", "items": { "type": "string", "enum": ["asr", "ocr", "platform_caption", "platform_ui", "visual"] } },
          "time_ranges": { "type": "array", "items": { "type": "array", "items": { "type": "number" }, "minItems": 2, "maxItems": 2 }, "nullable": true },
          "evidence": { "type": "array", "items": { "type": "string" }, "minItems": 1 },
          "promotion": {
            "type": "object",
            "required": ["status", "signals"],
            "properties": {
              "status": { "type": "string", "enum": ["paid", "gifted", "affiliate", "organic", "unknown"] },
              "signals": { "type": "array", "items": { "type": "string" } }
            }
          },
          "confidence": { "type": "string", "enum": ["low", "medium", "high"] }
        }
      }
    }
  }
}